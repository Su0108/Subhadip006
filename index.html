<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Invoice Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;900&family=Space+Mono:wght@400;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
:root{
  --bg:#080d0a;
  --glass:rgba(0,255,100,0.04);
  --gb:rgba(0,255,100,0.1);
  --gb2:rgba(0,255,100,0.06);
  --lime:#D1FF00;
  --lime-glow:rgba(209,255,0,0.32);
  --lime-dim:rgba(209,255,0,0.10);
  --accent:#00ff6a;
  --ag:rgba(0,255,106,0.25);
  --adim:rgba(0,255,106,0.07);
  --text:#e8f5ee;
  --muted:rgba(200,255,220,0.38);
  --sub:rgba(0,255,100,0.15);
  --danger:#ff4d6d;
  --font:'Montserrat',sans-serif;
  --mono:'Space Mono',monospace;
}
html,body{min-height:100%;background:var(--bg);color:var(--text);font-family:var(--font);-webkit-font-smoothing:antialiased;overflow-x:hidden;}

/* â”€â”€ Background â”€â”€ */
#bg{position:fixed;inset:0;z-index:0;pointer-events:none;
  background:
    radial-gradient(ellipse 80% 60% at 15% 0%,rgba(0,200,80,0.09) 0%,transparent 60%),
    radial-gradient(ellipse 60% 70% at 85% 100%,rgba(0,100,40,0.12) 0%,transparent 55%),
    radial-gradient(ellipse 40% 40% at 50% 50%,rgba(0,255,100,0.03) 0%,transparent 100%),
    var(--bg);
}
#noise{position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.028;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size:200px;
}

/* â”€â”€ Layout â”€â”€ */
#app{position:relative;z-index:1;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:24px 16px 0;}

/* â”€â”€ Screens â”€â”€ */
.screen{display:none;width:100%;max-width:480px;}
.screen.show{display:block;}
#splash.show{display:flex;align-items:center;justify-content:center;min-height:100vh;}

/* â”€â”€ Animations â”€â”€ */
@keyframes fadeUp{from{opacity:0;transform:translateY(22px)}to{opacity:1;transform:translateY(0)}}
@keyframes slideR{from{opacity:0;transform:translateX(36px)}to{opacity:1;transform:translateX(0)}}
@keyframes slideL{from{opacity:0;transform:translateX(-36px)}to{opacity:1;transform:translateX(0)}}
@keyframes glow{0%,100%{box-shadow:0 0 24px var(--lime-glow)}50%{box-shadow:0 0 50px rgba(209,255,0,.6)}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes heartbeat{0%,100%{transform:scale(1)}14%{transform:scale(1.3)}28%{transform:scale(1)}42%{transform:scale(1.2)}70%{transform:scale(1)}}
@keyframes heartglow{0%,100%{text-shadow:0 0 6px rgba(255,60,90,.5),0 0 12px rgba(255,60,90,.3)}50%{text-shadow:0 0 12px rgba(255,60,90,.9),0 0 24px rgba(255,60,90,.5),0 0 40px rgba(255,60,90,.3)}}
@keyframes shimmer{0%{background-position:-200% center}100%{background-position:200% center}}
.anim-fu{animation:fadeUp .5s cubic-bezier(.22,1,.36,1) both}
.anim-r{animation:slideR .36s cubic-bezier(.22,1,.36,1) both}
.anim-l{animation:slideL .36s cubic-bezier(.22,1,.36,1) both}

/* â”€â”€ Glass card â”€â”€ */
.card{background:var(--glass);backdrop-filter:blur(20px) saturate(140%);-webkit-backdrop-filter:blur(20px) saturate(140%);border:1px solid var(--gb);border-radius:22px;padding:32px 26px;box-shadow:0 10px 60px rgba(0,0,0,.6),0 0 0 1px rgba(0,255,100,0.04),inset 0 1px 0 rgba(0,255,100,0.08);}

/* â”€â”€ SPLASH â”€â”€ */
.splash-inner{text-align:center;width:100%;max-width:420px;}
.splash-card{background:rgba(0,255,100,0.04);backdrop-filter:blur(20px) saturate(140%);-webkit-backdrop-filter:blur(20px) saturate(140%);border:1px solid var(--gb);border-radius:26px;padding:52px 36px;box-shadow:0 10px 60px rgba(0,0,0,.65),inset 0 1px 0 rgba(0,255,100,0.1);}
.splash-eye{font-size:10px;letter-spacing:.32em;color:var(--muted);text-transform:uppercase;font-weight:600;margin-bottom:40px;}
.splash-h{font-size:clamp(52px,13vw,76px);font-weight:900;line-height:.88;letter-spacing:-.04em;margin-bottom:16px;}
.splash-h .grn{color:var(--lime);display:block;filter:drop-shadow(0 0 14px rgba(209,255,0,.4));}
.splash-sub{font-size:12px;color:var(--muted);margin-bottom:44px;letter-spacing:.07em;}

/* â”€â”€ Buttons â”€â”€ */
.btn-enter{display:inline-flex;align-items:center;gap:9px;background:var(--lime);color:#111;font-family:var(--font);font-weight:800;font-size:13.5px;letter-spacing:.15em;text-transform:uppercase;border:none;border-radius:100px;padding:17px 38px;cursor:pointer;transition:transform .15s,box-shadow .2s;box-shadow:0 0 28px var(--lime-glow);animation:glow 3s infinite;}
.btn-enter:hover{transform:scale(1.04);}
.btn-enter:active{transform:scale(.96);}
.btn-primary{display:flex;align-items:center;justify-content:center;gap:8px;background:var(--lime);color:#111;font-family:var(--font);font-weight:800;font-size:13px;letter-spacing:.13em;text-transform:uppercase;border:none;border-radius:100px;padding:15px 24px;cursor:pointer;transition:transform .15s,box-shadow .2s;box-shadow:0 0 22px var(--lime-glow);flex:2;}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 0 40px rgba(209,255,0,.5);}
.btn-primary:active{transform:scale(.97);}
.btn-ghost{display:flex;align-items:center;justify-content:center;background:transparent;border:1px solid var(--gb);color:var(--muted);font-family:var(--font);font-weight:600;font-size:12.5px;letter-spacing:.09em;border-radius:100px;padding:14px 20px;cursor:pointer;transition:all .15s;flex:1;}
.btn-ghost:hover{border-color:rgba(0,255,100,.3);color:var(--text);background:rgba(0,255,100,.05);}
.btn-dl{display:flex;align-items:center;justify-content:center;gap:9px;background:var(--lime);color:#111;width:100%;font-family:var(--font);font-weight:800;font-size:14px;letter-spacing:.12em;text-transform:uppercase;border:none;border-radius:14px;padding:18px;cursor:pointer;transition:transform .15s,box-shadow .2s;box-shadow:0 0 26px var(--lime-glow);margin-top:14px;}
.btn-dl:hover{transform:translateY(-2px);box-shadow:0 0 48px rgba(209,255,0,.5);}
.btn-dl:active{transform:scale(.97);}
.btn-dl:disabled{opacity:.5;cursor:not-allowed;transform:none;animation:none;}
.btn-share{display:flex;align-items:center;justify-content:center;gap:8px;background:rgba(0,255,100,.1);border:1px solid var(--gb);color:var(--accent);width:100%;font-family:var(--font);font-weight:700;font-size:13px;letter-spacing:.1em;text-transform:uppercase;border-radius:14px;padding:15px;cursor:pointer;transition:all .2s;margin-top:10px;}
.btn-share:hover{background:rgba(0,255,100,.18);box-shadow:0 0 20px rgba(0,255,100,.2);}
.nav-row{display:flex;gap:10px;margin-top:10px;}

/* â”€â”€ Progress â”€â”€ */
.prog{display:flex;gap:6px;margin-bottom:26px;}
.dot{flex:1;height:3px;border-radius:100px;background:var(--gb2);transition:background .35s;}
.dot.done{background:rgba(0,255,100,.4);}
.dot.on{background:var(--lime);}

/* â”€â”€ Step header â”€â”€ */
.sh-label{font-size:10px;letter-spacing:.28em;color:var(--accent);text-transform:uppercase;font-weight:700;margin-bottom:7px;}
.sh-title{font-size:22px;font-weight:800;letter-spacing:-.025em;line-height:1.1;}
.sh-sub{font-size:12px;color:var(--muted);margin-top:5px;margin-bottom:26px;}

/* â”€â”€ Fields â”€â”€ */
.field{margin-bottom:24px;}
.field label{display:block;font-size:9.5px;letter-spacing:.23em;text-transform:uppercase;color:var(--muted);font-weight:700;margin-bottom:9px;transition:color .2s;}
.field:focus-within label{color:var(--accent);}
.field input,.field textarea{width:100%;background:transparent;border:none;border-bottom:1px solid var(--sub);color:var(--text);font-family:var(--font);font-size:15px;font-weight:500;padding:4px 0 10px;outline:none;transition:border-color .2s;-webkit-appearance:none;appearance:none;}
.field input:focus,.field textarea:focus{border-bottom-color:var(--accent);}
.field input[type="date"]{color-scheme:dark;}
.field textarea{resize:none;line-height:1.6;}
.ferr{font-size:10.5px;color:var(--danger);margin-top:5px;font-weight:500;display:none;}
.ferr.show{display:block;}

/* â”€â”€ Items â”€â”€ */
.items-lbl{font-size:10px;letter-spacing:.25em;text-transform:uppercase;color:var(--accent);font-weight:700;margin:6px 0 14px;}
.items-hd{display:grid;grid-template-columns:1fr 95px;gap:8px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid var(--gb);}
.items-hd span{font-size:9.5px;letter-spacing:.2em;text-transform:uppercase;color:var(--muted);font-weight:700;}
.items-hd span:last-child{text-align:right;}
.irow{display:grid;grid-template-columns:1fr 95px;gap:8px;margin-bottom:7px;}
.irow input{background:rgba(0,255,100,.03);border:1px solid var(--gb2);border-radius:9px;color:var(--text);font-family:var(--font);font-size:12.5px;padding:10px 11px;outline:none;transition:border-color .2s;width:100%;}
.irow input:focus{border-color:rgba(0,255,100,.4);background:rgba(0,255,100,.05);}
.irow input[type="number"]{text-align:right;font-family:var(--mono);font-size:12px;}
.irow input::placeholder{color:rgba(200,255,220,.2);}

/* â”€â”€ Totals â”€â”€ */
.totals{margin-top:16px;padding-top:14px;border-top:1px solid var(--gb2);}
.trow{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
.tl{font-size:12.5px;color:var(--muted);}
.tv{font-family:var(--mono);font-size:13.5px;color:var(--text);}
.disc-row{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:10px;}
.disc-in{background:transparent;border:none;border-bottom:1px solid var(--sub);color:var(--text);font-family:var(--mono);font-size:13.5px;text-align:right;width:110px;outline:none;padding:4px 0;transition:border-color .2s;}
.disc-in:focus{border-bottom-color:var(--accent);}
.grand-row{background:var(--lime-dim);border:1px solid rgba(209,255,0,.22);border-radius:12px;padding:13px 15px;display:flex;justify-content:space-between;align-items:center;}
.grand-row .tl{font-size:12.5px;font-weight:700;color:var(--lime);}
.grand-row .tv{font-family:var(--mono);font-size:19px;font-weight:700;color:var(--lime);}

/* â”€â”€ Share box â”€â”€ */
.share-box{background:rgba(0,255,100,.06);border:1px solid var(--gb);border-radius:14px;padding:14px 16px;margin-top:14px;}
.share-label{font-size:9.5px;letter-spacing:.2em;text-transform:uppercase;color:var(--accent);font-weight:700;margin-bottom:8px;}
.share-url{font-family:var(--mono);font-size:10px;color:var(--muted);word-break:break-all;line-height:1.5;margin-bottom:10px;}
.share-copied{font-size:10px;color:var(--accent);text-align:center;margin-top:6px;height:16px;transition:opacity .3s;opacity:0;}
.share-copied.show{opacity:1;}

/* â”€â”€ RECEIPT â€” dark green glassmorphic â”€â”€ */
#receipt{
  background:#050f09;
  border:1px solid rgba(0,255,100,0.2);
  border-radius:16px;overflow:hidden;
  font-family:'Montserrat',sans-serif;
  margin-bottom:4px;
}
.r-head{
  background:#001a0c;
  border-bottom:1px solid rgba(0,255,100,0.15);
  padding:24px 20px;text-align:center;
}
.r-biz{font-size:22px;font-weight:900;color:#D1FF00;letter-spacing:-.03em;text-shadow:0 0 20px rgba(209,255,0,.4);}
.r-tag{font-size:10px;color:rgba(0,255,100,.45);margin-top:3px;letter-spacing:.09em;}
.r-dt{font-size:10px;color:rgba(200,255,220,.28);margin-top:8px;font-family:'Space Mono',monospace;}
.r-inv-badge{display:inline-block;background:rgba(0,255,100,.1);border:1px solid rgba(0,255,100,.2);border-radius:100px;font-size:9px;font-family:'Space Mono',monospace;color:rgba(0,255,100,.7);padding:3px 10px;margin-top:8px;letter-spacing:.1em;}
.r-body{padding:18px 18px 14px;background:#050f09;}
.r-parties{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;}
.rpl{font-size:8px;text-transform:uppercase;letter-spacing:.2em;color:rgba(0,255,100,.45);margin-bottom:4px;font-weight:700;}
.rpn{font-size:12.5px;font-weight:800;color:#e8f5ee;}
.rpd{font-size:9.5px;color:rgba(200,255,220,.5);margin-top:2px;line-height:1.55;}
.rpr{text-align:right;}
.r-divider{height:1px;background:linear-gradient(90deg,transparent,rgba(0,255,100,.15),transparent);margin:4px 0 14px;}
.r-tbl{width:100%;border-collapse:collapse;margin-bottom:12px;}
.r-tbl th{font-size:8px;text-transform:uppercase;letter-spacing:.18em;color:rgba(0,255,100,.45);font-weight:700;padding:6px 0;border-bottom:1px solid rgba(0,255,100,.1);text-align:left;}
.r-tbl th:last-child{text-align:right;}
.r-tbl td{font-size:11.5px;color:rgba(220,255,235,.85);padding:8px 0;border-bottom:1px solid rgba(0,255,100,.06);}
.r-tbl td:last-child{text-align:right;font-family:'Space Mono',monospace;font-size:10.5px;color:#D1FF00;}
.r-tbl tr:last-child td{border-bottom:none;}
.r-tots{border-top:1px solid rgba(0,255,100,.1);padding-top:10px;}
.r-trow{display:flex;justify-content:space-between;font-size:11px;color:rgba(200,255,220,.5);margin-bottom:6px;}
.r-trow .mn{font-family:'Space Mono',monospace;font-size:10.5px;color:rgba(200,255,220,.7);}
.r-disc .mn{color:#ff6b6b;}
.r-grand{
  background:#0a2010;
  border:1px solid rgba(209,255,0,.3);
  border-radius:10px;padding:12px 14px;
  display:flex;justify-content:space-between;align-items:center;margin-top:8px;
}
.r-grand span{font-size:11px;font-weight:800;color:#D1FF00;letter-spacing:.06em;text-shadow:0 0 10px rgba(209,255,0,.45);}
.r-grand .mn{font-family:'Space Mono',monospace;font-size:16px;font-weight:700;color:#D1FF00;text-shadow:0 0 14px rgba(209,255,0,.5);}
.r-foot{
  background:#030d06;
  border-top:1px solid rgba(0,255,100,0.12);
  padding:14px 18px;
  display:grid;grid-template-columns:auto 1fr;gap:16px;align-items:center;
}
.r-qrbox{
  background:#020a04;
  border:1px solid rgba(0,255,100,.25);
  border-radius:10px;
  display:flex;align-items:center;justify-content:center;flex-direction:column;
  padding:8px;gap:4px;flex-shrink:0;
}
.r-qrbox canvas,.r-qrbox img{width:72px!important;height:72px!important;display:block;border-radius:4px;}
.r-upi{font-size:7.5px;color:rgba(0,255,100,.45);text-align:center;max-width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-top:2px;font-family:'Space Mono',monospace;}
.r-sig{text-align:right;}
.r-sigline{width:88px;height:1px;background:rgba(0,255,100,.2);margin-left:auto;margin-bottom:5px;}
.r-signame{font-size:18px;font-weight:700;color:#e8f5ee;font-family:'Dancing Script',cursive;line-height:1.2;}
.r-siglbl{font-size:8px;color:rgba(0,255,100,.4);margin-top:2px;letter-spacing:.07em;}
.r-qr-scan{font-size:8px;color:rgba(0,255,100,.4);text-align:center;margin-top:2px;}
.r-notes{font-size:9px;color:rgba(200,255,220,.4);padding:8px 18px 12px;border-top:1px solid rgba(0,255,100,.07);font-style:italic;line-height:1.6;}

/* â”€â”€ Footer â”€â”€ */
.site-footer{
  width:100%;text-align:center;
  padding:28px 16px 24px;
  position:relative;z-index:1;
  margin-top:auto;
}
.footer-line{
  font-size:11px;color:rgba(200,255,220,.28);
  letter-spacing:.06em;font-weight:500;
  display:flex;align-items:center;justify-content:center;gap:6px;
  flex-wrap:wrap;
}
.footer-designer{
  background:linear-gradient(90deg,rgba(0,255,100,.0),rgba(0,255,100,.7),rgba(209,255,0,.8),rgba(0,255,100,.7),rgba(0,255,100,.0));
  background-size:200% auto;
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  animation:shimmer 4s linear infinite;
  font-weight:700;font-size:12px;
}
.footer-heart{
  display:inline-block;
  font-style:normal;
  animation:heartbeat 2s ease-in-out infinite, heartglow 2s ease-in-out infinite;
  cursor:default;
  font-size:14px;
}
.footer-india{color:rgba(255,153,51,.7);font-weight:600;}
.footer-sep{color:rgba(200,255,220,.15);}

/* â”€â”€ Misc â”€â”€ */
.dl-tip{font-size:10px;color:rgba(200,255,220,.2);text-align:center;margin-top:8px;letter-spacing:.05em;}
.spinner{width:16px;height:16px;border:2px solid rgba(5,26,13,.4);border-top-color:#051a0d;border-radius:50%;animation:spin .7s linear infinite;flex-shrink:0;}

@media(max-width:380px){
  .card{padding:24px 16px;}
  .splash-card{padding:40px 22px;}
  .r-parties{grid-template-columns:1fr;}
  .r-foot{grid-template-columns:1fr;}
}
</style>
</head>
<body>
<div id="bg"></div>
<div id="noise"></div>
<div id="app">

  <!-- â•â• SPLASH â•â• -->
  <div id="splash" class="screen show">
    <div class="splash-inner anim-fu">
      <div class="splash-card">
        <p class="splash-eye">Digital Creator Suite</p>
        <h1 class="splash-h"><span class="grn">INVOICE</span>STUDIO</h1>
        <p class="splash-sub">Professional receipts &nbsp;Â·&nbsp; In seconds</p>
        <button class="btn-enter" id="enterBtn">
          ENTER
          <svg width="15" height="15" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="#051a0d" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- â•â• STEP 1: BUSINESS â•â• -->
  <div id="step1" class="screen">
    <div class="card">
      <div class="prog"><div class="dot on"></div><div class="dot"></div><div class="dot"></div></div>
      <div class="sh-label">Step 1 of 3</div>
      <div class="sh-title">Your Business</div>
      <div class="sh-sub">Set up your sender profile</div>

      <div class="field"><label>Business Name *</label><input type="text" id="bizName" placeholder="Acme Studios"/><div class="ferr" id="errBiz">Business name is required</div></div>
      <div class="field"><label>Invoice Date</label><input type="date" id="bizDate"/></div>
      <div class="field"><label>Tagline (optional)</label><input type="text" id="bizTag" placeholder="Creating boldly since 2020"/></div>
      <div class="field"><label>Your Full Name</label><input type="text" id="bizFull" placeholder="Alex Johnson"/></div>
      <div class="field"><label>Contact Number</label><input type="tel" id="bizPhone" placeholder="+91 98765 43210"/></div>
      <div class="field"><label>Full Address</label><textarea id="bizAddr" rows="2" placeholder="123 Creator Lane, Mumbai 400001"></textarea></div>
      <div class="field">
        <label>UPI ID</label>
        <input type="text" id="bizUpi" placeholder="yourname@ybl" inputmode="email"/>
        <div style="font-size:9px;color:rgba(0,255,100,.35);margin-top:5px;">Works on GPay, PhonePe, Paytm, BHIM &amp; all UPI apps</div>
      </div>
      <div class="field"><label>Authorized Signatory Name</label><input type="text" id="bizSig" placeholder="Alex Johnson"/></div>
      <div class="field"><label>Notes / Description (optional)</label><textarea id="bizNotes" rows="2" placeholder="Thank you for your business!"></textarea></div>

      <div class="nav-row">
        <button class="btn-ghost" id="s1back">â† Back</button>
        <button class="btn-primary" id="s1next">Next <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="#051a0d" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
      </div>
    </div>
  </div>

  <!-- â•â• STEP 2: CUSTOMER + ITEMS â•â• -->
  <div id="step2" class="screen">
    <div class="card">
      <div class="prog"><div class="dot done"></div><div class="dot on"></div><div class="dot"></div></div>
      <div class="sh-label">Step 2 of 3</div>
      <div class="sh-title">Customer &amp; Items</div>
      <div class="sh-sub">Who are you billing?</div>

      <div class="field"><label>Customer Name *</label><input type="text" id="custName" placeholder="Jane Doe"/><div class="ferr" id="errCust">Customer name is required</div></div>
      <div class="field"><label>Customer Phone</label><input type="tel" id="custPhone" placeholder="+91 87654 32109"/></div>
      <div class="field"><label>Customer Address</label><textarea id="custAddr" rows="2" placeholder="456 Client Ave, Delhi 110001"></textarea></div>

      <div class="items-lbl">Line Items</div>
      <div class="items-hd"><span>Description</span><span>Amount (â‚¹)</span></div>
      <div id="itemRows"></div>

      <div class="totals">
        <div class="trow"><span class="tl">Subtotal</span><span class="tv" id="subVal">â‚¹0.00</span></div>
        <div class="disc-row"><span class="tl">Discount (â‚¹)</span><input type="number" class="disc-in" id="discIn" placeholder="0.00" min="0"/></div>
        <div class="grand-row"><span class="tl">Grand Total</span><span class="tv" id="grandVal">â‚¹0.00</span></div>
      </div>

      <div class="nav-row" style="margin-top:22px;">
        <button class="btn-ghost" id="s2back">â† Back</button>
        <button class="btn-primary" id="s2next">Preview <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="#051a0d" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
      </div>
    </div>
  </div>

  <!-- â•â• STEP 3: RECEIPT â•â• -->
  <div id="step3" class="screen">
    <div class="card">
      <div class="prog"><div class="dot done"></div><div class="dot done"></div><div class="dot on"></div></div>
      <div class="sh-label">Step 3 of 3</div>
      <div class="sh-title">Your Receipt</div>
      <div class="sh-sub">Preview, share &amp; download</div>

      <!-- â”€â”€ Capturable Receipt â”€â”€ -->
      <div id="receipt">
        <div class="r-head">
          <div class="r-biz" id="rBiz"></div>
          <div class="r-tag" id="rTag"></div>
          <div class="r-dt" id="rDt"></div>
          <div class="r-inv-badge" id="rInvNum"></div>
        </div>
        <div class="r-body">
          <div class="r-parties">
            <div>
              <div class="rpl">Bill To</div>
              <div class="rpn" id="rCustName"></div>
              <div class="rpd" id="rCustPhone"></div>
              <div class="rpd" id="rCustAddr"></div>
            </div>
            <div class="rpr">
              <div class="rpl">From</div>
              <div class="rpn" id="rBizContact"></div>
              <div class="rpd" id="rBizPhone"></div>
              <div class="rpd" id="rBizAddr"></div>
            </div>
          </div>
          <div class="r-divider"></div>
          <table class="r-tbl">
            <thead><tr><th>Description</th><th>Amount</th></tr></thead>
            <tbody id="rTbody"></tbody>
          </table>
          <div class="r-tots">
            <div class="r-trow"><span>Subtotal</span><span class="mn" id="rSub"></span></div>
            <div class="r-trow r-disc" id="rDiscRow" style="display:none"><span>Discount</span><span class="mn" id="rDisc"></span></div>
            <div class="r-grand"><span>TOTAL DUE</span><span class="mn" id="rGrand"></span></div>
          </div>
        </div>
        <div class="r-foot">
          <div style="display:flex;flex-direction:column;align-items:center;gap:6px;">
            <div class="r-qrbox" id="rQrBox" onclick="tapPay()" style="cursor:pointer;" title="Tap to Pay">
              <div id="rQr"></div>
            </div>
            <div class="r-tap-lbl" id="rTapLbl">âš¡ Tap to Pay</div>
            <div class="r-upi" id="rUpi"></div>
          </div>
          <div class="r-sig">
            <div class="r-signame" id="rSigName"></div>
            <div class="r-siglbl">Authorized Signatory</div>
          </div>
        </div>
        <div class="r-notes" id="rNotes" style="display:none"></div>
      </div>

      <!-- â”€â”€ Share Link Box â”€â”€ -->
      <div class="share-box" id="shareBox">
        <div class="share-label">ğŸ”— Share Payment Link</div>
        <div class="share-url" id="shareUrl">Generating linkâ€¦</div>
        <button class="btn-share" id="copyBtn">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><rect x="5" y="5" width="9" height="9" rx="2" stroke="currentColor" stroke-width="1.8"/><path d="M3 11H2a1 1 0 01-1-1V2a1 1 0 011-1h8a1 1 0 011 1v1" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>
          Copy Link
        </button>
        <div class="share-copied" id="shareCopied">âœ“ Link copied to clipboard!</div>
      </div>

      <div class="nav-row" style="margin-top:10px;">
        <button class="btn-ghost" id="s3biz">â† Business</button>
        <button class="btn-ghost" id="s3items">â† Items</button>
      </div>
      <button class="btn-dl" id="dlBtn">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 2v8M5 7l3 3 3-3M2 12h12" stroke="#051a0d" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        Download Receipt
      </button>
      <p class="dl-tip">Saves as high-quality PNG image</p>
    </div>
  </div>

</div><!-- #app -->

<!-- â•â• FOOTER â•â• -->
<footer class="site-footer">
  <div class="footer-line">
    <span>Web Designed by</span>
    <span class="footer-designer">Subhadip Mandal</span>
    <span class="footer-sep">Â·</span>
    <span>Made with</span>
    <i class="footer-heart">â¤ï¸</i>
    <span>in</span>
    <span class="footer-india">India</span>
  </div>
</footer>

<script>
// â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const $=id=>document.getElementById(id);
const val=id=>($(id)?$(id).value||'':'').trim();
const txt=(id,v)=>{$(id).textContent=v;};
const showEl=(id,v)=>{var e=$(id);e.textContent=v||'';e.style.display=v?'':'none';};
const fmt=n=>'â‚¹'+parseFloat(n||0).toLocaleString('en-IN',{minimumFractionDigits:2,maximumFractionDigits:2});
const fmtNum=n=>parseFloat(n||0).toFixed(2);

// â”€â”€ Screen navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let cur=0;
const IDS=['splash','step1','step2','step3'];

function goTo(next,dir){
  $( IDS[cur]).classList.remove('show');
  var el=$(IDS[next]);
  el.classList.remove('anim-fu','anim-r','anim-l');
  void el.offsetWidth;
  el.classList.add('show',dir==='fwd'?'anim-r':dir==='back'?'anim-l':'anim-fu');
  cur=next;
  window.scrollTo({top:0,behavior:'smooth'});
}

// â”€â”€ Build item rows â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildItems(){
  var c=$('itemRows');
  if(c.children.length===7)return;
  for(var i=0;i<7;i++){
    var d=document.createElement('div');
    d.className='irow';
    d.innerHTML='<input type="text" class="ititle" placeholder="Item '+(i+1)+'"/><input type="number" class="iprice" placeholder="0.00" min="0" step="0.01"/>';
    c.appendChild(d);
  }
  document.querySelectorAll('.iprice').forEach(el=>el.addEventListener('input',calcTotals));
  $('discIn').addEventListener('input',calcTotals);
}

function calcTotals(){
  var sub=0;
  document.querySelectorAll('.iprice').forEach(el=>{sub+=parseFloat(el.value)||0;});
  var disc=parseFloat($('discIn').value)||0;
  var grand=Math.max(0,sub-disc);
  txt('subVal',fmt(sub));
  txt('grandVal',fmt(grand));
}

// â”€â”€ Get grand total â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getGrand(){
  var sub=0;
  document.querySelectorAll('.iprice').forEach(el=>{sub+=parseFloat(el.value)||0;});
  var disc=parseFloat($('discIn').value)||0;
  return Math.max(0,sub-disc);
}

// â”€â”€ Build shareable URL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildShareURL(){
  var data={
    bn:val('bizName'), bd:val('bizDate'), bt:val('bizTag'),
    bf:val('bizFull'), bp:val('bizPhone'), ba:val('bizAddr'),
    bu:val('bizUpi'), bs:val('bizSig'), bno:val('bizNotes'),
    cn:val('custName'), cp:val('custPhone'), ca:val('custAddr'),
    disc:val('discIn'),
    items:Array.from(document.querySelectorAll('.irow')).map(r=>({
      t:r.querySelector('.ititle').value.trim(),
      p:r.querySelector('.iprice').value
    })).filter(x=>x.t||parseFloat(x.p)>0)
  };
  var encoded=btoa(unescape(encodeURIComponent(JSON.stringify(data))));
  return window.location.href.split('?')[0].split('#')[0]+'?d='+encoded+'#view';
}

// â”€â”€ Load from URL params â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadFromURL(){
  var params=new URLSearchParams(window.location.search);
  var d=params.get('d');
  if(!d)return false;
  try{
    var data=JSON.parse(decodeURIComponent(escape(atob(d))));
    var set=(id,v)=>{if($(id)&&v)$(id).value=v;};
    set('bizName',data.bn);set('bizDate',data.bd);set('bizTag',data.bt);
    set('bizFull',data.bf);set('bizPhone',data.bp);set('bizAddr',data.ba);
    set('bizUpi',data.bu);set('bizSig',data.bs);set('bizNotes',data.bno);
    set('custName',data.cn);set('custPhone',data.cp);set('custAddr',data.ca);
    set('discIn',data.disc);
    // fill items
    if(data.items&&data.items.length){
      var rows=document.querySelectorAll('.irow');
      data.items.forEach((item,i)=>{
        if(rows[i]){
          rows[i].querySelector('.ititle').value=item.t||'';
          rows[i].querySelector('.iprice').value=item.p||'';
        }
      });
      calcTotals();
    }
    return true;
  }catch(e){return false;}
}

// â”€â”€ Build receipt â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildReceipt(){
  var bizName=val('bizName')||'Business Name';
  var dateRaw=val('bizDate');
  var dateStr=dateRaw
    ? new Date(dateRaw+'T12:00:00').toLocaleDateString('en-IN',{day:'numeric',month:'long',year:'numeric'})
    : new Date().toLocaleDateString('en-IN',{day:'numeric',month:'long',year:'numeric'});

  // Invoice number: INV-YYYYMMDD-XXXX
  var invNum='INV-'+(dateRaw||new Date().toISOString().slice(0,10)).replace(/-/g,'')+'-'+Math.floor(1000+Math.random()*9000);

  txt('rBiz',bizName);
  showEl('rTag',val('bizTag'));
  txt('rDt',dateStr);
  txt('rInvNum',invNum);

  txt('rCustName',val('custName')||'â€”');
  showEl('rCustPhone',val('custPhone'));
  showEl('rCustAddr',val('custAddr'));
  txt('rBizContact',val('bizFull')||bizName);
  showEl('rBizPhone',val('bizPhone'));
  showEl('rBizAddr',val('bizAddr'));

  // Items table
  var tbody=$('rTbody');
  tbody.innerHTML='';
  var rows=document.querySelectorAll('.irow');
  var sub=0,hasItem=false;
  rows.forEach((row,i)=>{
    var title=row.querySelector('.ititle').value.trim();
    var price=parseFloat(row.querySelector('.iprice').value)||0;
    sub+=price;
    if(title||price>0){
      hasItem=true;
      var tr=document.createElement('tr');
      tr.innerHTML='<td>'+title+'</td><td>'+fmt(price)+'</td>';
      tbody.appendChild(tr);
    }
  });
  if(!hasItem){
    var tr=document.createElement('tr');
    tr.innerHTML='<td colspan="2" style="color:rgba(200,255,220,.3);font-style:italic;text-align:center;padding:12px 0;">No items added</td>';
    tbody.appendChild(tr);
  }

  var disc=parseFloat($('discIn').value)||0;
  var grand=Math.max(0,sub-disc);
  txt('rSub',fmt(sub));
  txt('rGrand',fmt(grand));
  var discRow=$('rDiscRow');
  if(disc>0){discRow.style.display='flex';txt('rDisc','âˆ’ '+fmt(disc));}
  else{discRow.style.display='none';}

  // â”€â”€ QR Code â€” scan with any camera app â†’ opens UPI payment â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  var bizN=val('bizName')||'Business';
  var upiVal=val('bizUpi');
  var qrContainer=document.getElementById('rQr');
  qrContainer.innerHTML='';

  var upiURL=upiVal
    ? 'upi://pay?pa='+upiVal+'&pn='+encodeURIComponent(bizN)+'&am='+fmtNum(grand)+'&cu=INR&tn='+encodeURIComponent('Payment to '+bizN)
    : '';
  window._upiURL=upiURL;

  if(upiVal){
    try{
      new QRCode(qrContainer,{
        text:upiURL,
        width:72,height:72,
        colorDark:'#D1FF00',
        colorLight:'#050f09',
        correctLevel:QRCode.CorrectLevel.M
      });
    }catch(e){
      qrContainer.innerHTML='<div style="color:rgba(0,255,100,.3);font-size:8px;text-align:center;padding:8px;">QR Error</div>';
    }
  } else {
    qrContainer.innerHTML='<div style="color:rgba(0,255,100,.2);font-size:7px;text-align:center;padding:10px;">No UPI</div>';
  }
  txt('rUpi', upiVal||'');

  txt('rSigName',val('bizSig')||val('bizFull')||'Signatory');

  var notes=val('bizNotes');
  var notesEl=$('rNotes');
  if(notes){notesEl.style.display='block';notesEl.textContent='Note: '+notes;}
  else{notesEl.style.display='none';}

  // â”€â”€ Share link â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  var url=buildShareURL();
  $('shareUrl').textContent=url;
}

// â”€â”€ Copy share link â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function copyLink(){
  var url=$('shareUrl').textContent;
  if(navigator.clipboard){
    navigator.clipboard.writeText(url).then(()=>showCopied());
  } else {
    // fallback
    var ta=document.createElement('textarea');
    ta.value=url;ta.style.position='fixed';ta.style.opacity='0';
    document.body.appendChild(ta);ta.select();
    document.execCommand('copy');document.body.removeChild(ta);
    showCopied();
  }
}
function showCopied(){
  var el=$('shareCopied');el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'),2500);
}

// â”€â”€ Download as PNG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function download(){
  var btn=$('dlBtn');
  btn.disabled=true;
  btn.innerHTML='<div class="spinner"></div> Savingâ€¦';
  try{
    await document.fonts.ready;
    var el=$('receipt');
    var canvas=await html2canvas(el,{
      scale:4,
      useCORS:true,
      allowTaint:true,
      backgroundColor:'#050f09',
      logging:false,
      scrollX:0,
      scrollY:0
    });
    var a=document.createElement('a');
    var bname=(val('bizName')||'invoice').replace(/\s+/g,'-').toLowerCase();
    var bdate=val('bizDate')||new Date().toISOString().slice(0,10);
    a.download='receipt-'+bname+'-'+bdate+'.png';
    a.href=canvas.toDataURL('image/png',1.0);
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }catch(err){
    console.error(err);
    alert('Error: '+err.message);
  }
  btn.disabled=false;
  btn.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 2v8M5 7l3 3 3-3M2 12h12" stroke="#111" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg> Download Receipt';
}

// â”€â”€ Tap QR to Pay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function tapPay(){
  var url=window._upiURL||'';
  if(!url){alert('Please enter a UPI ID first.');return;}
  window.location.href=url;
}

// â”€â”€ Wire up all events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$('enterBtn').addEventListener('click',()=>goTo(1,'fwd'));
$('s1back').addEventListener('click',()=>goTo(0,'back'));
$('s1next').addEventListener('click',()=>{
  if(!val('bizName')){$('errBiz').classList.add('show');$('bizName').focus();return;}
  $('errBiz').classList.remove('show');goTo(2,'fwd');
});
$('bizName').addEventListener('input',()=>$('errBiz').classList.remove('show'));

$('s2back').addEventListener('click',()=>goTo(1,'back'));
$('s2next').addEventListener('click',()=>{
  if(!val('custName')){$('errCust').classList.add('show');$('custName').focus();return;}
  $('errCust').classList.remove('show');
  buildReceipt();goTo(3,'fwd');
});
$('custName').addEventListener('input',()=>$('errCust').classList.remove('show'));

$('s3biz').addEventListener('click',()=>goTo(1,'back'));
$('s3items').addEventListener('click',()=>goTo(2,'back'));
$('dlBtn').addEventListener('click',download);
$('copyBtn').addEventListener('click',copyLink);

// â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$('bizDate').value=new Date().toISOString().slice(0,10);
buildItems();

// Load from shared URL if present
var isShared=loadFromURL();
if(isShared&&window.location.hash==='#view'){
  buildReceipt();
  goTo(3,'fwd');
  // Lock all inputs â€” viewer cannot edit
  document.querySelectorAll('input,textarea').forEach(function(el){
    el.setAttribute('readonly','true');
    el.setAttribute('disabled','true');
    el.style.opacity='0.7';
    el.style.pointerEvents='none';
  });
  // Hide nav buttons and share box
  ['s1next','s1back','s2next','s2back','s3biz','s3items','shareBox'].forEach(function(id){
    var e=$(id); if(e) e.style.display='none';
  });
  // Show read-only banner on receipt card
  var banner=document.createElement('div');
  banner.style.cssText='background:rgba(0,255,100,0.08);border:1px solid rgba(0,255,100,0.2);border-radius:10px;padding:10px 14px;margin-bottom:14px;font-size:11px;color:rgba(0,255,100,0.7);text-align:center;letter-spacing:.05em;';
  banner.innerHTML='ğŸ”’ <strong>Payment Receipt</strong> â€” Shared by '+($('rBiz').textContent||'Sender');
  var card=document.querySelector('#step3 .card');
  if(card) card.insertBefore(banner,card.firstChild);
}
</script>
</body>
</html>
